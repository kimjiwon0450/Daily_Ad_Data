name: Facebook Ads ETL Daily Run

on:
  schedule:
    # # 매일 한국 시간 오전 7시 (UTC 22:00)
    - cron: '13 22 * * *'

  workflow_dispatch:

jobs:
  run-bot:
    runs-on: ubuntu-latest

    steps:
    # 1. 내 Private 리포지토리의 파일들을 다 가져옴 (JSON 키 포함)
    - name: Checkout repository
      uses: actions/checkout@v3

    # 2. 파이썬 설치
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'

    # 3. 라이브러리 설치
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install facebook_business pandas pandas-gbq google-auth
        pip install facebook_business pandas pandas-gbq google-auth google-cloud-bigquery  
        pip install facebook_business pandas pandas-gbq google-auth google-cloud-bigquery gspread oauth2client

    # 4. 그냥 실행 (파일이 다 옆에 있으니까 알아서 됨)
    - name: Run ETL Script
      run: python 메타_마케팅데이터_가져오기.py